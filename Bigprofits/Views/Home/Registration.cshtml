@model Bigprofits.Models.MemberInfo

@{
    Layout = null;
}
<!doctype html>
<html lang="en" class="h-100 dark-mode">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="generator" content="">
    <title>Bigprofits</title>

    <!-- manifest meta -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="manifest" href="manifest.json" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="/assets/img/logo.png" sizes="180x180">
    <link rel="icon" href="/assets/img/logo.png" sizes="32x32" type="image/png">
    <link rel="icon" href="/assets/img/logo.png" sizes="16x16" type="image/png">

    <!-- Google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- bootstrap icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <!-- style css for this template -->
    <link href="~/assets/css/style.css" rel="stylesheet" id="style">
    <link href="~/SweetAlert/dist/sweetalert2.min.css" rel="stylesheet">
    <style>
        /* Thank You Popup Styles */
        .thankyou-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }

        /* Thank You Popup 1 - Confetti Celebration */
        .thankyou-popup-1 .popup-content {
            display: flex;
            background: linear-gradient(135deg, #10331f, #0b6228);
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            position: relative;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            animation: slideIn 0.5s ease;
        }

        .thankyou-popup-1 .logo-container {
            width: 30%;
            background: #0c6028;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .thankyou-popup-1 .content-container {
            width: 70%;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ffd700;
            animation: confettiFall 3s infinite;
        }

        /* Thank You Popup 2 - Sparkle Magic */
        .thankyou-popup-2 .popup-content {
            display: flex;
            background: linear-gradient(135deg, #ff6f61, #ffeb3b);
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            position: relative;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            animation: slideIn 0.5s ease;
        }

        .thankyou-popup-2 .logo-container {
            width: 30%;
            background: #1e3c72;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .thankyou-popup-2 .content-container {
            width: 70%;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .sparkle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #fff;
            border-radius: 50%;
            animation: sparkle 2s infinite;
        }

        /* Thank You Popup 3 - Fireworks Burst */
        .thankyou-popup-3 .popup-content {
            display: flex;
            background: linear-gradient(135deg, #28a745, #34d058);
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            position: relative;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            animation: slideIn 0.5s ease;
        }

        .thankyou-popup-3 .logo-container {
            width: 30%;
            background: #ffeb3b;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .thankyou-popup-3 .content-container {
            width: 70%;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .firework {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #ffd700;
            border-radius: 50%;
            animation: firework 1.5s infinite;
        }

        .popup-content .logo {
            max-height: 80px;
            width: auto;
        }

        .popup-content h3 {
            color: #fff;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.6rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .popup-content p {
            color: #fff;
            font-size: 1.1rem;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .popup-content .btn-close {
            background: #fff;
            color: #333;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

            .popup-content .btn-close:hover {
                background: #f0f0f0;
                transform: scale(1.05);
                box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
            }

        .popup-content .close-icon {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            color: #fff;
            cursor: pointer;
            transition: transform 0.3s ease, color 0.3s ease;
        }

            .popup-content .close-icon:hover {
                color: #ffd700;
                transform: rotate(90deg);
            }

        /* Preview Buttons */
        .preview-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #1e3c72;
            color: #fff;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 9998;
        }

            .preview-btn:hover {
                background: #2a5298;
                transform: scale(1.05);
            }

            .preview-btn:nth-child(2) {
                bottom: 70px;
                background: #ff6f61;
            }

                .preview-btn:nth-child(2):hover {
                    background: #ffeb3b;
                }

            .preview-btn:nth-child(3) {
                bottom: 120px;
                background: #28a745;
            }

                .preview-btn:nth-child(3):hover {
                    background: #34d058;
                }

        .dark-mode .form-control option {
            background-color: #07130C
        }

        .dark-mode .alert-danger, .dark-mode .card.alert-danger, .dark-mode .bg-danger-light {
            background-color: #e74949;
        }
    </style>
</head>

<body class="body-scroll d-flex flex-column h-100 theme-green" data-page="signup">
    <!-- loader section -->
    <div class="container-fluid loader-wrap">
        <div class="row h-100">
            <div class="col-10 col-md-6 col-lg-5 col-xl-3 mx-auto text-center align-self-center">
                <div class="loader-cube-wrap loader-cube-animate mx-auto">
                    <img src="~/assets/img/logo.png" alt="Logo">
                </div>
                <p class="mt-4">It's time Bigprofits<br><strong>Please wait...</strong></p>
            </div>
        </div>
    </div>
    <!-- loader section ends -->
    <!-- Begin page content -->
    <main class="container-fluid h-100">
        <!-- Thank You Popup 1 - Confetti Celebration -->
        <div class="thankyou-popup thankyou-popup-1" id="thankyouPopup1">
            <div class="popup-content">
                <div class="logo-container">
                    <img src="~/assets/img/logo.png" alt="Orbit Chain Logo" class="logo" />
                </div>
                <div class="content-container">
                    <span class="close-icon" onclick="closeThankYouPopup('thankyouPopup1')">×</span>
                    <h3>Thank You!</h3>
                    <p>@Html.Raw(TempData["Ssuc"])</p>
                    <button class="btn-close" onclick="closeThankYouPopup('thankyouPopup1')">👍</button>
                    <!-- Confetti Particles -->
                    <div class="confetti" style="top: 0; left: 10%; animation-delay: 0s;"></div>
                    <div class="confetti" style="top: 0; left: 30%; animation-delay: 0.5s; background: #ff6f61;"></div>
                    <div class="confetti" style="top: 0; left: 50%; animation-delay: 1s;"></div>
                    <div class="confetti" style="top: 0; left: 70%; animation-delay: 1.5s; background: #28a745;"></div>
                    <div class="confetti" style="top: 0; left: 90%; animation-delay: 2s;"></div>
                </div>
            </div>
        </div>

        <!-- Thank You Popup 2 - Sparkle Magic -->
        <div class="thankyou-popup thankyou-popup-2" id="thankyouPopup2">
            <div class="popup-content">
                <div class="logo-container">
                    <img src="~/assets/img/logo.png" alt="Orbit Chain Logo" class="logo" />
                </div>
                <div class="content-container">
                    <span class="close-icon" onclick="closeThankYouPopup('thankyouPopup2')">×</span>
                    <h3>Thank You!</h3>
                    <p>@Html.Raw(TempData["Ssuc"])</p>
                    <button class="btn-close" onclick="closeThankYouPopup('thankyouPopup2')">Okay, Got It!</button>
                    <!-- Sparkle Particles -->
                    <div class="sparkle" style="top: 20%; left: 20%; animation-delay: 0s;"></div>
                    <div class="sparkle" style="top: 30%; left: 80%; animation-delay: 0.5s;"></div>
                    <div class="sparkle" style="top: 70%; left: 30%; animation-delay: 1s;"></div>
                    <div class="sparkle" style="top: 60%; left: 70%; animation-delay: 1.5s;"></div>
                </div>
            </div>
        </div>

        <!-- Thank You Popup 3 - Fireworks Burst -->
        <div class="thankyou-popup thankyou-popup-3" id="thankyouPopup3">
            <div class="popup-content">
                <div class="logo-container">
                    <img src="~/assets/img/logo.png" alt="Orbit Chain Logo" class="logo" />
                </div>
                <div class="content-container">
                    <span class="close-icon" onclick="closeThankYouPopup('thankyouPopup3')">×</span>
                    <h3>Thank You!</h3>
                    <p>@Html.Raw(TempData["Ssuc"])</p>
                    <button class="btn-close" onclick="closeThankYouPopup('thankyouPopup3')">Okay, Got It!</button>
                    <!-- Firework Particles -->
                    <div class="firework" style="--x: 1; --y: 1; animation-delay: 0s;"></div>
                    <div class="firework" style="--x: -1; --y: 1; animation-delay: 0.3s; background: #ff6f61;"></div>
                    <div class="firework" style="--x: 1; --y: -1; animation-delay: 0.6s;"></div>
                    <div class="firework" style="--x: -1; --y: -1; animation-delay: 0.9s; background: #1e3c72;"></div>
                </div>
            </div>
        </div>

        <!-- Preview Buttons -->
       @*  <button class="preview-btn" onclick="showThankYouPopup('thankyouPopup1')">Preview Popup 1</button>
        <button class="preview-btn" onclick="showThankYouPopup('thankyouPopup2')">Preview Popup 2</button>
        <button class="preview-btn" onclick="showThankYouPopup('thankyouPopup3')">Preview Popup 3</button> *@

        <div class="row h-100">
            <div class="col-12 text-center mb-auto px-0">
                <header class="header">
                    <div class="row">
                        <div class="col-auto">
                            <a href="/account/sign-in" target="_self" class="btn btn-light btn-44">
                                <i class="bi bi-arrow-left"></i>
                            </a>
                        </div>

                        <div class="col-auto">
                            <a class="btn btn-light btn-44 invisible"></a>
                        </div>
                    </div>
                </header>
            </div>

            <div class="col-10 col-md-6 col-lg-5 col-xl-3 mx-auto align-self-center text-center py-4">
                <div class="text-center mb-4">
                    <a href="/">
                        <img src="@Url.Content("~/assets/img/logo.png")" alt="Logo" style="height:80px; width:80px; object-fit:contain;">
                    </a>
                </div>
                <h1 class="mb-4 text-color-theme">Sign up</h1>

                @if (TempData["msgDR"] != null)
                {
                    <div class="alert alert-danger"> @TempData["msgDR"] </div>
                }

                <form class="was-validated" action="/account/create-account" id="registrationForm" method="post">
                    <div class="form-floating is-valid mb-1">
                        <input asp-for="SpoId" value="@ViewBag.SpoId" type="text" class="form-control" placeholder="Sponsor Id" required>
                        <label for="SpoId">Sponsor Id</label>
                    </div>
                    <div id="sponsor" class="text-start mb-3"></div>

                    <input type="hidden" name="WalletAddress" id="WalletAddress" required />
                    <div class="form-floating is-valid mb-3">
                        <input id="lblWalletConnected"  class="form-control" value="connecting..." readonly>
                        <label for="lblWalletConnected">Wallet</label>
                    </div>

                    <div class="form-floating is-valid mb-3">
                        <select asp-for="RefPos" required class="form-control">
                            <option value="">Select Position</option>
                            <option value="LEFT">LEFT</option>
                            <option value="RIGHT">RIGHT</option>
                        </select>
                    </div>
                    
                    <p class="mb-3">
                        <span class="text-muted">You have Already account?</span> <a href="/account/sign-in">Sign In </a>
                    </p>
                    <button id="btnSignUp" type="submit" class="btn btn-lg btn-default w-100 mb-4 shadow">
                        Sign up
                    </button>
                </form>
            </div>
            
        </div>
    </main>

    <!-- Required jquery and libraries -->
    <script src="~/assets/js/jquery-3.3.1.min.js"></script>
    <script src="~/assets/js/popper.min.js"></script>
    <script src="~/assets/vendor/bootstrap-5/js/bootstrap.bundle.min.js"></script>

    <!-- cookie js -->
    <script src="~/assets/js/jquery.cookie.js"></script>

    <!-- Customized jquery file -->
    <script src="~/assets/js/main.js"></script>
    <script src="~/assets/js/color-scheme.js"></script>

    <!-- PWA app service registration and works -->
    <script src="~/assets/js/pwa-services.js"></script>

    <!-- page level custom script -->
    <script src="~/assets/js/app.js"></script>
    <script src="~/SweetAlert/dist/sweetalert2.js"></script>

    <script>
        async function connectDApp() {
            if (typeof window.ethereum === 'undefined') {
                Swal.fire("MetaMask not detected!", "Please install MetaMask to continue.", "error");
                return;
            }

            try {
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });

                if (!accounts || accounts.length === 0) {
                    Swal.fire("Wallet not connected", "Please connect your wallet.", "warning");
                    return;
                }

                const connectedAddress = accounts[0].toLowerCase();

                // Display the connected address
                $("#lblWalletConnected").val(connectedAddress);
                $("#WalletAddress").val(connectedAddress); // If you are saving it in a hidden field

                console.log("Wallet connected:", connectedAddress);
            } catch (error) {
                console.error("Wallet connection error:", error);
                Swal.fire("Connection failed", error.message, "error");
            }
        }

        // Auto-connect on page load (optional)
        window.addEventListener("load", function () {
            connectDApp();
        });
    </script>
    <script>
        document.getElementById("registrationForm").addEventListener("submit", function () {
            var btn = document.getElementById("btnSignUp");
            btn.innerHTML = "Processing...";
            btn.disabled = true;
        });

        if ($("#SpoId").val().trim() != "") IsSponsorExist($("#SpoId").val().trim());

        $("#SpoId").keyup(function () {
            if ($(this).val().trim() != "") {
                IsSponsorExist($(this).val().trim());
            } else {
                $("#sponsor").text("");
            }
        });

        $("#MemLogId").keyup(function () {
            str = $(this).val().trim();
            str = str.replace(/\s/g, '');
            $(this).val(str);

            if ($(this).val().trim() != "") {
                IsUsernameExist($(this).val().trim());
            } else {
                $("#username").val("");
            }
        });

        function IsSponsorExist(spoId) {
            try {
                $.ajax({
                    url: "/account/SponsorName/" + spoId,
                    method: 'post',
                    data: { spoId: spoId },
                    dataType: "text",
                    success: function (data) {
                        console.log(data);
                        $("#sponsor").text(data);
                    }
                });
            } catch (e) {
                console.log(e);
            }
        }

        function IsUsernameExist(username) {
            try {
                $.ajax({
                    url: "/account/GetUsername/" + username,
                    method: 'post',
                    data: { username: username },
                    dataType: "text",
                    success: function (data) {
                        console.log(data);
                        $("#username").text(data);
                    }
                });
            } catch (e) {
                console.log(e);
            }
        }

        // Thank You Popup Functions
        function showThankYouPopup(popupId) {
            const popup = document.getElementById(popupId);
            popup.style.display = 'flex';
        }

        function closeThankYouPopup(popupId) {
            const popup = document.getElementById(popupId);
            popup.style.display = 'none';
        }

        // Show Thank You Popup on Page Load if TempData["Ssuc"] is set
        @if (TempData["Ssuc"] != null)
        {
            <text>
                    window.onload = function() {
                        showThankYouPopup('thankyouPopup1'); // Default to Popup 1; you can change to 2 or 3
                    };
            </text>
        }
    </script>
    

</body>
</html>